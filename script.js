const out = document.getElementById('out'); const balBtn = document.getElementById('bal'); const buyBtn = document.getElementById('buy'); const modeSel = document.getElementById('mode'); function log(m){ out.textContent = m + '\n' + out.textContent; } balBtn.addEventListener('click', async ()=>{ log('Checking balance...'); try{ const res = await fetch('/api/balance'); const j = await res.json(); log(JSON.stringify(j)); }catch(e){ log('Error: '+e.message); } }); buyBtn.addEventListener('click', async ()=>{ log('Buying...'); try{ const res = await fetch('/api/trade',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({symbol:'R_100',contract_type:'CALL',amount:1,duration:1,duration_unit:'m'})}); const j = await res.json(); log(JSON.stringify(j)); }catch(e){ log('Error: '+e.message); } }); (async ()=>{ try{ const s = await fetch('/api/status'); const j = await s.json(); if(j.mode) modeSel.value = j.mode; log('Server mode: '+j.mode); }catch(e){} })();